<!--

​    Licensed to the Apache Software Foundation (ASF) under one
​    or more contributor license agreements.  See the NOTICE file
​    distributed with this work for additional information
​    regarding copyright ownership.  The ASF licenses this file
​    to you under the Apache License, Version 2.0 (the
​    "License"); you may not use this file except in compliance
​    with the License.  You may obtain a copy of the License at
​    
​        http://www.apache.org/licenses/LICENSE-2.0
​    
​    Unless required by applicable law or agreed to in writing,
​    software distributed under the License is distributed on an
​    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
​    KIND, either express or implied.  See the License for the
​    specific language governing permissions and limitations
​    under the License.

-->

# 地理信息系统

## AREA

### 函数简介

本函数用于计算给定顶点的多边形面积。

**函数名：** AREA

**输入序列：** 仅支持单个输入序列，类型为 FLOAT / DOUBLE。

**输出序列：** 输出单个序列，类型为 DOUBLE。

**参数：**

+`unit`: 输出面积使用的单位。可以使用 "km2", "m2", "sqmi", "sqyd", "acre".

**提示：**

+ 第 1 列输入序列应为经度，第 2 列输入序列应为纬度。
    + 经度的合法区间是 $[-180,180]$,纬度的合法区间是 $[-90,90]$.
    + 如果一个点中有缺失值或不合法值，该点将被忽略。
+ 支持以下单位：
    + "km2" 表示平方千米。也可以使用 "squarekilometer".
    + "m2" 表示平方米。也可以使用 "squaremeter".
    + "sqmi" 表示平方英里。也可以使用 "squaremile".
    + "sqyd" 表示平方码。也可以使用 "squareyard".
    + "acre" 表示英亩。也可以使用 "ac".
+ 多边形面积是在球体表面计算的，而非在投影上。

### 使用示例

输入序列：

```
+-----------------------------+----------------+-----------------+
|                         Time|root.test.d1.lat|root.test.d1.long|
+-----------------------------+----------------+-----------------+
|1970-01-01T08:00:00.000+08:00|           116.8|             39.7|
|1970-01-01T08:00:01.000+08:00|           116.5|             40.0|
|1970-01-01T08:00:02.000+08:00|           116.2|             40.1|
|1970-01-01T08:00:03.000+08:00|           115.9|             39.9|
|1970-01-01T08:00:04.000+08:00|           116.2|             39.8|
+-----------------------------+----------------+-----------------+
```


用于查询的 SQL 语句：

```sql
select area(lat,long,'unit'='km2') from root.test.d1
```

输出序列：

```
+-----------------------------+-------------------------------------------------------+
|                         Time|area(root.test.d1.lat, root.test.d1.long, "unit"="km2")|
+-----------------------------+-------------------------------------------------------+
|1970-01-01T08:00:00.000+08:00|                                       905.035533357631|
+-----------------------------+-------------------------------------------------------+
```


## Mileage

### 函数简介

本函数用于计算给定轨迹的累计里程。

**函数名：** MILEAGE

**输入序列：** 仅支持单个输入序列，类型为 FLOAT / DOUBLE。

**输出序列：** 输出单个序列，类型为 DOUBLE。

**参数：**

+`unit`: 输出长度使用的单位。可以使用 "km", "m", "mi", "yd", "nm".

**提示：**

+ 第 1 列输入序列应为经度，第 2 列输入序列应为纬度。
    + 经度的合法区间是 $[-180,180]$,纬度的合法区间是 $[-90,90]$.
    + 如果一个点中有缺失值或不合法值，该点将被忽略。
+ 支持以下单位：
    + "km" 表示千米。也可以使用 "kilometer".
    + "m" 表示米。也可以使用 "meter".
    + "mi" 表示英里。也可以使用 "mile".
    + "yd" 表示码。也可以使用 "yard".
    + "nm" 表示海里。也可以使用 "nmi", "nauticalmile".
+ 路径长度按大圆距离计算。

### 使用示例

输入序列：

```
+-----------------------------+----------------+-----------------+
|                         Time|root.test.d1.lat|root.test.d1.long|
+-----------------------------+----------------+-----------------+
|1970-01-01T08:00:00.000+08:00|           116.8|             39.7|
|1970-01-01T08:00:01.000+08:00|           116.5|             40.0|
|1970-01-01T08:00:02.000+08:00|           116.2|             40.1|
|1970-01-01T08:00:03.000+08:00|           115.9|             39.9|
|1970-01-01T08:00:04.000+08:00|           116.2|             39.8|
+-----------------------------+----------------+-----------------+
```


用于查询的 SQL 语句：

```sql
select milage(lat,long,'unit'='km') from root.test.d1
```

输出序列：

```
+-----------------------------+---------------------------------------------------------+
|                         Time|mileage(root.test.d1.lat, root.test.d1.long, "unit"="km")|
+-----------------------------+---------------------------------------------------------+
|1970-01-01T08:00:00.000+08:00|                                                      0.0|
|1970-01-01T08:00:01.000+08:00|                                        42.05814079353064|
|1970-01-01T08:00:02.000+08:00|                                        69.91135507566852|
|1970-01-01T08:00:03.000+08:00|                                       103.78888718889525|
|1970-01-01T08:00:04.000+08:00|                                       131.71024653665967|
+-----------------------------+---------------------------------------------------------+
```